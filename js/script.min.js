function chkCookies(){Cookies.get("name")?updateUserPanel("in"):(log("not a logged in user"),updateUserPanel("out"))}function updateUserPanel(e){var t="";"in"==e?(t=Cookies.get("name"),$("#ckb-signin").hide(),$("#ckb-signout").show()):(t="",$("#ckb-signin").show(),$("#ckb-signout").hide()),$(".cbk-username").html(t)}function login(){Cookies.set("name","Mike Mc",{expires:1}),updateUserPanel("in")}function logout(){Cookies.remove("name"),updateUserPanel("out")}!function(e){var t;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var n=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=n,i}}}(function(){function f(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}return function e(g){function d(e,t,n){if("undefined"!=typeof document){if(1<arguments.length){"number"==typeof(n=f({path:"/"},d.defaults,n)).expires&&(n.expires=new Date(1*new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var i=JSON.stringify(t);/^[\{\[]/.test(i)&&(t=i)}catch(e){}t=g.write?g.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o="";for(var c in n)n[c]&&(o+="; "+c,!0!==n[c]&&(o+="="+n[c].split(";")[0]));return document.cookie=e+"="+t+o}for(var r={},s=function(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)},a=document.cookie?document.cookie.split("; "):[],p=0;p<a.length;p++){var l=a[p].split("="),u=l.slice(1).join("=");this.json||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var h=s(l[0]);if(u=(g.read||g)(u,h)||s(u),this.json)try{u=JSON.parse(u)}catch(e){}if(r[h]=u,e===h)break}catch(e){}}return e?r[e]:r}}return(d.set=d).get=function(e){return d.call(d,e)},d.getJSON=function(e){return d.call({json:!0},e)},d.remove=function(e,t){d(e,"",f(t,{expires:-1}))},d.defaults={},d.withConverter=e,d}(function(){})});var throbber=$("#ckb-throbber"),container=$("#container"),username=$(".cbk-username");function log(e){console.log(e)}function setContent(e){console.log(e)}function getContent(e){return setDisplay("clear"),log("in content: "+e),data="cid="+e,pages=[],$.getJSON("controllers/content.php?cid="+e,function(e){$.each(e,function(){pages.push(new Content(this.ct_id,this.ct_title,this.ct_body,this.ct_author,this.ct_date,this.ct_version))}),setDisplay("show",$.templates("#homePage").render(pages))}),log(pages),pages}function getRecipes(){return setDisplay("clear"),recipes=[],$.getJSON("controllers/recipes.php",function(e){$.each(e,function(){recipes.push(new Recipe(this.recipeid,this.recipename,this.recipedesc,this.recipeserving,this.recipecooktime,this.recipepreptime,this.recipephoto))}),setDisplay("show",$.templates("#myRecipes").render(recipes))}),log(recipes),recipes}function getRecipe(e){return setDisplay("clear"),recipes=[],$.getJSON("controllers/recipe.php",{rcpid:e},function(e){$.each(e,function(){recipes.push(new Recipe(this.recipeid,this.recipename,this.recipedesc,this.recipeserving,this.recipecooktime,this.recipepreptime,this.recipephoto))}),setDisplay("show",$.templates("#myRecipe").render(recipes))}),log(recipes),recipes}function setDisplay(e,t){switch(e){case"show":case"clear":case"error":throbber.hide(),container.html(t);break;default:throbber.hide(),container.html(t)}}function Recipe(e,t,n,i,o,c,r){this.id=e,this.name=t,this.desc=n,this.serves=i,this.cTime=o,this.pTime=c,this.photo=r}function Content(e,t,n,i,o,c){this.id=e,this.title=t,this.body=n,this.author=i,this.date=o,this.ver=c,this.summary=function(e){this.summary=e.replace(/<[^>]+>/g,"").substring(1,250)+"..."}}$("#ckb-signin a").click(function(e){e.preventDefault(),login()}),$("#ckb-signout a").click(function(e){e.preventDefault(),log("out"),logout()}),$("#container").on("click",".ckb-recipeCard-sm",function(){window.location.hash="/recipe/view/"+$(this).attr("data-recipe")});var home=function(){getContent(1)},content=function(e){getContent(e)},cook=function(){console.log("cook")},contact=function(){console.log("contack")},recipes=function(){getRecipes()},recipe=function(e){getRecipe(e)},routes={"/":home,"/pages/:slug":content,"/cook":cook,"/contact":contact,"/recipes":[recipes,function(){console.log("An inline route handler.")}],"/recipe/view/:rcpid":recipe},router=Router(routes);function menuToggle(e){e.classList.toggle("change")}router.init(["/"]);var nav=document.getElementById("topNav"),menu=document.getElementsByClassName("menuitems"),close=document.getElementById("closebtn");for(nav.style.height="50px",i=0;i<menu.length;i++)menu[i].style.marginTop="100px";function navToggle(){if(nav.style.height<="275px"){nav.style.height="50px";var e=0;for(e=0;e<menu.length;e++)menu[e].style.opacity="0.0",menu[e].style.marginTop="100px";document.body.style.backgroundColor="rgba(0,0,0,0.0)"}else if(nav.style.height<="50px"){nav.style.height="275px",$("nav ul").show();e=0;for(e=0;e<menu.length;e++)menu[e].style.opacity="1.0",menu[e].style.marginTop="0px";document.body.style.backgroundColor="rgba(0,0,0,0.4)"}}close.addEventListener("click",function(){var e=close.children;for(i=0;i<e.length;i++)e[i].classList.toggle("active")});